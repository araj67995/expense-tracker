<%- include("partials/header"); %>

<div class="add-profile-budget">
    <h3><i class="fas fa-user-plus"></i> Edit Profile</h3>

    <form action="/save" method="post" id="profile-form">

        <input type="text" name="name" id="profile" placeholder="Enter Profile Name"  value="<%= found.name  %>">
  
        <div class="money-input">
          <input type="number" name="income" id="num1" placeholder="Your Income"  value="<%= found.income %>" required>
        </div>
  
        <div class="money-input">
          <input type="number" name="budget" id="Budget" placeholder="Your Budget"  value="<%= found.budget %>" oninput="calculateDifference()" required>
        </div>
             
        <input type="hidden" name="id" value="<%= found._id %>" >
        <input type="hidden" id="remBudget" name="remBudget">
  
        <button class="btn" type="submit"><i class="fas fa-save"></i> Add Profile & Budget</button>

      </form>

  </div>

 
<script>
  function calculateDifference() {
    const newBudget = parseFloat(document.getElementById("Budget").value);
    const oldBudget = <%= found.budget %>;
    const remaining = <%= found.remainingBudget %>;

    const newRemaining = newBudget - oldBudget + remaining;
    document.getElementById("remBudget").value = newRemaining;
  }
</script>

  <%- include("partials/footer"); %>
